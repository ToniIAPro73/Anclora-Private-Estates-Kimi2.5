import{c as E,u as M,r as l,j as e}from"./index-CR2pPLyh.js";import{gsap as p}from"./index-BDA7kSH2.js";import{ScrollTrigger as q}from"./ScrollTrigger-Heh74mPD.js";import{A as K}from"./arrow-right-gen6t78j.js";import{M as I,P as L}from"./phone-B6ey5IQr.js";import{M as D}from"./map-pin-DADewY7t.js";import{C as O}from"./circle-check-big-CnW_wDc9.js";import{T as W}from"./triangle-alert-3SSc3t-_.js";import{S as U}from"./send-C8uBh_BK.js";const $=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],z=E("calendar",$);p.registerPlugin(q);const B=[{icon:I,labelKey:"contact.email",value:"hello@ancloraprivateestates.com",href:"mailto:hello@ancloraprivateestates.com"},{icon:L,labelKey:"contact.whatsapp",value:"+34 600 000 000",href:"tel:+34600000000"},{icon:D,labelKey:"contact.office",value:"Palma de Mallorca",href:"#"}];function ae(){const{t}=M(),g=l.useRef(null),b=l.useRef(null),v=l.useRef(null),N=l.useRef(null),T="https://nexus.anclora.group/api/public/cta/lead",h="none".toLowerCase(),c=h==="recaptcha"||h==="altcha"?h:"none",j="",y="",[s,n]=l.useState({firstName:"",lastName:"",phone:"",email:"",interest:"",message:"",newsletter:!1,privacyAccepted:!1}),[w,k]=l.useState(!1),[C,m]=l.useState("idle"),[_,d]=l.useState(""),[x,A]=l.useState(""),[J,u]=l.useState(c==="none");l.useRef(null);const S=l.useRef(null);l.useEffect(()=>{const a=g.current,r=b.current,i=v.current,o=N.current;if(!a||!r||!i||!o)return;const f=p.context(()=>{p.fromTo(r,{x:"-8vw",opacity:0},{x:0,opacity:1,duration:.8,ease:"power3.out",scrollTrigger:{trigger:r,start:"top 80%",toggleActions:"play none none reverse"}}),p.fromTo(i,{x:"8vw",opacity:0},{x:0,opacity:1,duration:.8,ease:"power3.out",scrollTrigger:{trigger:i,start:"top 80%",toggleActions:"play none none reverse"}}),p.fromTo(o,{y:50,opacity:0},{y:0,opacity:1,duration:.8,ease:"power3.out",scrollTrigger:{trigger:o,start:"top 85%",toggleActions:"play none none reverse"}})},a);return()=>f.revert()},[t]),l.useEffect(()=>{if(c==="none"){u(!0);return}if(c==="recaptcha"){u(!1);return}if(c==="altcha"){u(!1);return}},[y,c,j]);const F=async a=>{a.preventDefault();const r=a.currentTarget;if(!s.privacyAccepted){m("error"),d(t("contact.form.privacyRequired"));return}if(c==="recaptcha"&&!x){m("error"),d(t("contact.form.captchaRequired"));return}let i;if(c==="altcha"){const o=new FormData(r).get("altcha");if(i=typeof o=="string"?o:"",!i){m("error"),d(t("contact.form.captchaRequired"));return}}k(!0),m("idle"),d("");try{const f={name:`${s.firstName} ${s.lastName}`.trim()||s.firstName||"Web Contact",email:s.email||void 0,phone:s.phone||void 0,property_interest:s.interest||void 0,message:s.message||void 0,notes:{message:s.message||null,newsletter_opt_in:s.newsletter},source:"web",source_system:"cta_web",source_channel:"website",source_detail:"private-estates-contact-form",source_url:window.location.href,source_referrer:document.referrer||void 0,captcha_provider:c!=="none"?c:void 0,captcha_token:c==="recaptcha"?x:void 0,altcha_payload:c==="altcha"?i:void 0,captcha:c==="recaptcha"?{provider:"recaptcha",token:x}:c==="altcha"?{provider:"altcha",payload:i}:void 0},R=await fetch(T,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});if(!R.ok){const P=await R.json().catch(()=>({}));throw new Error(P?.detail||t("contact.form.error"))}m("success"),n({firstName:"",lastName:"",phone:"",email:"",interest:"",message:"",newsletter:!1,privacyAccepted:!1}),A(""),c==="recaptcha"&&window.grecaptcha&&S.current!==null&&window.grecaptcha.reset(S.current)}catch(o){m("error"),d(o instanceof Error?o.message:t("contact.form.error"))}finally{k(!1)}};return e.jsx("section",{ref:g,id:"contact",className:"section-flowing bg-anclora-cream dark:bg-anclora-teal py-24 lg:py-32",children:e.jsxs("div",{className:"w-full px-6 lg:pl-12 lg:pr-[136px]",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-12",children:[e.jsx("div",{className:"lg:col-span-7",children:e.jsxs("div",{ref:b,className:"card-premium overflow-hidden h-[64vh] relative",children:[e.jsx("img",{src:"/images/contact-office.jpg",alt:"Anclora Office",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-anclora-teal dark:from-anclora-teal via-anclora-teal/60 dark:via-anclora-teal/60 to-transparent"}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8 lg:p-12",children:[e.jsx("p",{className:"text-eyebrow mb-4",children:t("nav.contact")}),e.jsxs("h2",{className:"font-display text-4xl lg:text-5xl font-bold text-anclora-cream leading-tight mb-4",children:[t("contact.title").split(".")[0],".",e.jsx("br",{}),t("contact.title").split(".")[1],"."]}),e.jsx("p",{className:"text-anclora-text-muted leading-relaxed max-w-lg mb-6",children:t("contact.description")}),e.jsxs("button",{className:"btn-anclora-premium flex items-center gap-2 !min-w-[200px]",children:[e.jsx(z,{className:"w-4 h-4"}),t("contact.cta"),e.jsx(K,{className:"w-4 h-4"})]})]})]})}),e.jsx("div",{className:"lg:col-span-5",children:e.jsx("div",{ref:v,className:"h-full flex flex-col justify-center",children:e.jsxs("div",{className:"p-8 bg-anclora-teal-bg dark:bg-anclora-teal-bg/70 rounded-2xl border border-anclora-navy/10 dark:border-white/10",children:[e.jsx("h3",{className:"font-display text-2xl font-semibold text-anclora-cream mb-8",children:t("footer.contact")}),e.jsx("div",{className:"space-y-6",children:B.map(a=>e.jsxs("a",{href:a.href,className:"flex items-center gap-4 group",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-anclora-gold/10 flex items-center justify-center flex-shrink-0 group-hover:bg-anclora-gold/20 transition-colors",children:e.jsx(a.icon,{className:"w-5 h-5 text-anclora-gold"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-anclora-text-muted mb-0.5",children:t(a.labelKey)}),e.jsx("p",{className:"text-anclora-cream font-medium group-hover:text-anclora-gold transition-colors",children:a.value})]})]},a.labelKey))}),e.jsxs("div",{className:"mt-8 pt-8 border-t border-anclora-navy/10 dark:border-white/10",children:[e.jsx("p",{className:"text-sm text-anclora-text-muted mb-2",children:t("contact.hours")}),e.jsx("p",{className:"text-anclora-cream",children:t("contact.weekdays")}),e.jsx("p",{className:"text-anclora-cream",children:t("contact.saturday")})]})]})})})]}),e.jsx("div",{ref:N,className:"mt-10 lg:mt-14",children:e.jsxs("div",{className:"card-premium p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-eyebrow mb-3",children:t("contact.form.eyebrow")}),e.jsx("h3",{className:"font-display text-3xl lg:text-4xl font-semibold text-anclora-cream mb-3",children:t("contact.form.title")}),e.jsx("p",{className:"text-anclora-text-muted leading-relaxed",children:t("contact.form.description")})]}),C==="success"?e.jsxs("div",{className:"rounded-xl border border-anclora-gold/30 bg-anclora-gold/10 p-5 flex items-start gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-anclora-gold mt-0.5"}),e.jsx("p",{className:"text-anclora-cream",children:t("contact.form.success")})]}):e.jsxs("form",{onSubmit:F,className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"block text-sm text-anclora-text-muted mb-1.5",children:t("contact.form.firstName")}),e.jsx("input",{id:"firstName",type:"text",className:"input-anclora",value:s.firstName,onChange:a=>n(r=>({...r,firstName:a.target.value})),placeholder:t("contact.form.placeholderFirstName"),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm text-anclora-text-muted mb-1.5",children:t("contact.form.lastName")}),e.jsx("input",{id:"lastName",type:"text",className:"input-anclora",value:s.lastName,onChange:a=>n(r=>({...r,lastName:a.target.value})),placeholder:t("contact.form.placeholderLastName"),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm text-anclora-text-muted mb-1.5",children:t("contact.form.phone")}),e.jsx("input",{id:"phone",type:"tel",className:"input-anclora",value:s.phone,onChange:a=>n(r=>({...r,phone:a.target.value})),placeholder:t("contact.form.placeholderPhone"),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm text-anclora-text-muted mb-1.5",children:t("contact.form.email")}),e.jsx("input",{id:"email",type:"email",className:"input-anclora",value:s.email,onChange:a=>n(r=>({...r,email:a.target.value})),placeholder:t("contact.form.placeholderEmail"),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"interest",className:"block text-sm text-anclora-text-muted mb-1.5",children:t("contact.form.interest")}),e.jsx("input",{id:"interest",type:"text",className:"input-anclora",value:s.interest,onChange:a=>n(r=>({...r,interest:a.target.value})),placeholder:t("contact.form.placeholderInterest")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"message",className:"block text-sm text-anclora-text-muted mb-1.5",children:t("contact.form.message")}),e.jsx("textarea",{id:"message",className:"input-anclora h-28 resize-none",value:s.message,onChange:a=>n(r=>({...r,message:a.target.value})),placeholder:t("contact.form.placeholderMessage")})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-2.5 mt-1",children:[c!=="none"&&e.jsxs("div",{className:"captcha-shell",children:[e.jsx("p",{className:"text-sm text-anclora-text-muted mb-3",children:t("contact.form.captchaLabel")}),c==="recaptcha"&&e.jsx(e.Fragment,{children:e.jsx("p",{className:"text-sm text-red-200",children:t("contact.form.captchaNotConfigured")})}),c==="altcha"&&e.jsx(e.Fragment,{children:e.jsx("p",{className:"text-sm text-red-200",children:t("contact.form.captchaNotConfigured")})})]}),e.jsxs("label",{className:"flex items-start gap-2.5 text-sm text-anclora-text-muted cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"mt-0.5 accent-[var(--anclora-gold)]",checked:s.newsletter,onChange:a=>n(r=>({...r,newsletter:a.target.checked}))}),e.jsx("span",{children:t("contact.form.newsletter")})]}),e.jsxs("label",{className:"flex items-start gap-2.5 text-sm text-anclora-text-muted cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"mt-0.5 accent-[var(--anclora-gold)]",checked:s.privacyAccepted,onChange:a=>n(r=>({...r,privacyAccepted:a.target.checked})),required:!0}),e.jsx("span",{children:t("contact.form.privacy")})]})]}),C==="error"&&e.jsxs("div",{className:"lg:col-span-2 rounded-xl border border-red-400/25 bg-red-500/10 p-4 flex items-start gap-2.5",children:[e.jsx(W,{className:"w-4 h-4 text-red-300 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-100",children:_||t("contact.form.error")})]}),e.jsx("div",{className:"lg:col-span-2 pt-2",children:e.jsxs("button",{type:"submit",disabled:w||!s.privacyAccepted||c==="recaptcha"&&!j||c==="altcha"&&!y,className:"btn-anclora-premium inline-flex items-center gap-2 !min-w-[220px] disabled:opacity-70 disabled:cursor-not-allowed",children:[e.jsx(U,{className:"w-4 h-4"}),t(w?"contact.form.sending":"contact.form.submit")]})})]})]})})]})})}export{ae as ContactSection};
